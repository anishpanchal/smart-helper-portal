{% extends 'base.html' %}
{% load static %}

{% block title %}AI Assistant - Smart College Helper Portal{% endblock %}

{% block extra_css %}
<style>
    .chat-container {
        max-width: 1000px;
        margin: 0 auto;
        height: 70vh;
        min-height: 600px;
    }

    .chat-messages {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .chat-message {
        padding: 1rem 1.5rem;
        border-radius: 16px;
        max-width: 80%;
        animation: fadeInUp 0.3s ease;
        word-wrap: break-word;
    }

    .chat-message.user {
        align-self: flex-end;
        background: var(--accent-gradient);
        color: white;
    }

    .chat-message.ai {
        align-self: flex-start;
        background: var(--bg-glass-hover);
        border: 1px solid var(--border-color);
        white-space: pre-wrap;
    }

    .chat-message.ai strong {
        color: var(--accent-primary);
    }

    .chat-message.ai code {
        background: rgba(0, 0, 0, 0.2);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
    }

    .chat-input-container {
        padding: 1.5rem;
        border-top: 1px solid var(--border-color);
        display: flex;
        gap: 1rem;
        background: var(--bg-glass);
    }

    .chat-input {
        flex: 1;
        padding: 1rem;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 1rem;
        font-family: inherit;
    }

    .chat-input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .ai-thinking {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-secondary);
        font-style: italic;
    }

    .ai-thinking-dots {
        display: flex;
        gap: 4px;
    }

    .ai-thinking-dot {
        width: 6px;
        height: 6px;
        background: var(--accent-primary);
        border-radius: 50%;
        animation: aiPulse 1s ease-in-out infinite;
    }

    .suggested-questions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
    }

    .suggested-question {
        padding: 0.5rem 1rem;
        background: var(--bg-glass-hover);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        color: var(--text-secondary);
    }

    .suggested-question:hover {
        background: var(--accent-primary);
        color: white;
        transform: translateY(-2px);
    }
</style>
{% endblock %}

{% block content %}
<div class="welcome-section">
    <h1 class="welcome-title">
        <i class="fas fa-robot"></i> Smart AI Assistant
    </h1>
    <p class="welcome-subtitle">Ask me anything about your college journey!</p>
</div>

<div class="chat-container glass-card" style="padding: 0;">
    <div id="chat-messages" class="chat-messages">
        <!-- Welcome Message -->
        <div class="chat-message ai">
            <strong>ðŸ¤– AI Assistant:</strong><br>
            Hello! I'm your Smart College Helper AI Assistant. I can help you with:
            <br>â€¢ Study planning and exam preparation
            <br>â€¢ Explaining technical concepts (DBMS, Programming, etc.)
            <br>â€¢ Hackathon and project ideas
            <br>â€¢ Assignment help
            <br>â€¢ Placement and career guidance
            <br><br>
            What would you like to know?
        </div>

        <!-- Suggested Questions -->
        <div class="suggested-questions">
            <div class="suggested-question" onclick="askQuestion('What should I study today?')">
                What should I study today?
            </div>
            <div class="suggested-question" onclick="askQuestion('Explain DBMS normalization')">
                Explain DBMS normalization
            </div>
            <div class="suggested-question" onclick="askQuestion('Suggest hackathon ideas')">
                Suggest hackathon ideas
            </div>
            <div class="suggested-question" onclick="askQuestion('Give exam preparation roadmap')">
                Exam preparation roadmap
            </div>
        </div>
    </div>

    <div class="chat-input-container">
        <input type="text" id="chat-input" class="chat-input" placeholder="Type your question here... (Press Enter to send)" autocomplete="off">
        <button id="send-button" class="btn" onclick="sendAIMessage()">
            <i class="fas fa-paper-plane"></i> Send
        </button>
    </div>
</div>

<script>
    function askQuestion(question) {
        document.getElementById('chat-input').value = question;
        sendAIMessage();
    }
</script>
{% endblock %}